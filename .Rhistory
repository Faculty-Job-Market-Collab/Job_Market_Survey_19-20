labs(x = "",
y = "Percent Respondents\n(by research field)")+
my_theme_horiz
metric_data %>%
group_by(question, research_category) %>%
ggplot(aes(x = question, y=percent, fill = research_category))+
#geom_dotplot()+
geom_boxplot(position = "dodge")+
scale_fill_manual(breaks = research_breaks, values = cbPalette)+
facet_wrap(~question, scales = "free")+
geom_text(data = metric_medians, aes(group = research_category, x = question,
y = max*0.8,
label = paste("med=", med)),
position=position_dodge(width=1), size = 5)+
scale_y_continuous(expand = c(0,0))+
labs(x = "", y = "Response value")+
my_theme_horiz+
theme(axis.text.x = element_blank(),
axis.ticks.x = element_blank())
metric_data %>%
group_by(question, research_category) %>%
ggplot(aes(x = question, fill = research_category))+
#geom_dotplot()+
geom_boxplot(position = "dodge")+
scale_fill_manual(breaks = research_breaks, values = cbPalette)+
facet_wrap(~question, scales = "free")+
geom_text(data = metric_medians,
aes(group = research_category, x = question,
y = max*0.8, label = paste("med=", med)),
position=position_dodge(width=1), size = 5)+
scale_y_continuous(expand = c(0,0))+
labs(x = "", y = "Response value")+
my_theme_horiz+
theme(axis.text.x = element_blank(),
axis.ticks.x = element_blank())
metric_data %>%
group_by(question, research_category) %>%
ggplot(aes(x = question, y = response, fill = research_category))+
#geom_dotplot()+
geom_boxplot(position = "dodge")+
scale_fill_manual(breaks = research_breaks, values = cbPalette)+
facet_wrap(~question, scales = "free")+
geom_text(data = metric_medians,
aes(group = research_category, x = question,
y = max*0.8, label = paste("med=", med)),
position=position_dodge(width=1), size = 5)+
scale_y_continuous(expand = c(0,0))+
labs(x = "", y = "Response value")+
my_theme_horiz+
theme(axis.text.x = element_blank(),
axis.ticks.x = element_blank())
metric_data %>%
group_by(question, research_category) %>%
ggplot(aes(x = question, y = as.numeric(response),
fill = research_category))+
#geom_dotplot()+
geom_boxplot(position = "dodge")+
scale_fill_manual(breaks = research_breaks, values = cbPalette)+
facet_wrap(~question, scales = "free")+
geom_text(data = metric_medians,
aes(group = research_category, x = question,
y = max*0.8, label = paste("med=", med)),
position=position_dodge(width=1), size = 5)+
scale_y_continuous(expand = c(0,0))+
labs(x = "", y = "Response value")+
my_theme_horiz+
theme(axis.text.x = element_blank(),
axis.ticks.x = element_blank())
metric_data %>%
mutate(question = case_when(
question == "first_author" ~ "First-author papers",
question == "peer-reviewed_papers" ~ "Peer-reviewed papers",
question == "scholar_citations_all" ~ "Google Scholar citations",
question == "scholar_hindex" ~ "Google Scholar H index"
)) %>%
group_by(question, research_category) %>%
ggplot(aes(x = question, y = as.numeric(response),
fill = research_category))+
#geom_dotplot()+
geom_boxplot(position = "dodge")+
scale_fill_manual(breaks = research_breaks, values = cbPalette)+
facet_wrap(~question, scales = "free")+
geom_text(data = metric_medians,
aes(group = research_category, x = question,
y = max*0.8, label = paste("med=", med)),
position=position_dodge(width=1), size = 5)+
scale_y_continuous(expand = c(0,0))+
labs(x = "", y = "Response value per applicant")+
my_theme_horiz+
theme(axis.text.x = element_blank(),
axis.ticks.x = element_blank())
metric_data %>%
mutate(question = case_when(
question == "first_author" ~ "First-author papers",
question == "peer-reviewed_papers" ~ "Peer-reviewed papers",
question == "scholar_citations_all" ~ "Google Scholar citations",
question == "scholar_hindex" ~ "Google Scholar H index"
))
fig1c_plot <- metric_data %>%
mutate(question = case_when(
question == "first_author" ~ "First-author papers",
question == "peer-reviewed_papers" ~ "Peer-reviewed papers",
question == "scholar_citations_all" ~ "Google Scholar citations",
question == "scholar_hindex" ~ "Google Scholar H index"
)) %>% View()
metric_medians <- metric_data %>%
mutate(question = case_when(
question == "first_author" ~ "First-author papers",
question == "peer-reviewed_papers" ~ "Peer-reviewed papers",
question == "scholar_citations_all" ~ "Google Scholar citations",
question == "scholar_hindex" ~ "Google Scholar H index"
)) %>%
group_by(question, research_category) %>%
summarise(med = median(as.numeric(response), na.rm = TRUE),
max = max(as.numeric(response), na.rm = TRUE))
metric_data %>%
mutate(question = case_when(
question == "first_author" ~ "First-author papers",
question == "peer-reviewed_papers" ~ "Peer-reviewed papers",
question == "scholar_citations_all" ~ "Google Scholar citations",
question == "scholar_hindex" ~ "Google Scholar H index"
)) %>%
group_by(question, research_category) %>%
ggplot(aes(x = question, y = as.numeric(response),
fill = research_category))+
#geom_dotplot()+
geom_boxplot(position = "dodge")+
scale_fill_manual(breaks = research_breaks, values = cbPalette)+
facet_wrap(~question, scales = "free")+
geom_text(data = metric_medians,
aes(group = research_category, x = question,
y = max*0.8, label = paste("med=", med)),
position=position_dodge(width=1), size = 5)+
scale_y_continuous(expand = c(0,0))+
labs(x = "", y = "Response value per applicant")+
my_theme_horiz+
theme(axis.text.x = element_blank(),
axis.ticks.x = element_blank())
fig1b_data %>%
get_plot_summary(., "research_category",
"number_postdocs", binary = FALSE) %>%
ggplot(aes(x=number_postdocs, y = percent,
fill = research_category))+
geom_col(position = "dodge")+
scale_fill_manual(breaks = research_breaks, values = cbPalette)+
coord_flip()+
scale_y_continuous(expand = c(0,0))+
labs(y="Percent Responses",
x="Number of postdoctoral positions")+
my_theme_horiz
fig1a_data %>%
get_plot_summary(., "research_category",
"application_cycles", binary = FALSE) %>%
ggplot(aes(x=application_cycles, y = percent,
fill = research_category))+
geom_col(position = "dodge")+
scale_fill_manual(breaks = research_breaks, values = cbPalette)+
coord_flip()+
scale_y_continuous(expand = c(0,0))+
labs(y="Percent Respondents",
x="Number of application cycles\n",
fill = "Field",
subtitle = paste("Mann-Whitney U: p<0.01"))+
base_theme
fig1a_plot_leg + my_theme
source("~/Desktop/Job_Market_Survey_19-20/mollet_socialsci/code/figure_1.R")
ggsave(filename = paste0("Figure_1_", Sys.Date(), ".png"),
device = 'png', units = "in", scale = 1.75,
path = 'mollet_socialsci/figures/', width = 8, height = 6)
?theme
fig1b_data %>%
get_plot_summary(., "research_category",
"number_postdocs", binary = FALSE) %>%
ggplot(aes(x=number_postdocs, y = percent,
fill = research_category))+
geom_col(position = "dodge")+
scale_fill_manual(breaks = research_breaks, values = cbPalette)+
coord_flip()+
scale_y_continuous(expand = c(0,0))+
labs(y="Percent Respondents",
x="Number of postdoctoral\npositions")+
my_theme_horiz+
theme(strip.background = element_rect(linetype = blank))
metric_data %>%
mutate(question = case_when(
question == "first_author" ~ "First-author papers",
question == "peer-reviewed_papers" ~ "Peer-reviewed papers",
question == "scholar_citations_all" ~ "Google Scholar citations",
question == "scholar_hindex" ~ "Google Scholar H index"
)) %>%
group_by(question, research_category) %>%
ggplot(aes(x = question, y = as.numeric(response),
fill = research_category))+
#geom_dotplot()+
geom_boxplot(position = "dodge")+
scale_fill_manual(breaks = research_breaks, values = cbPalette)+
facet_wrap(~question, scales = "free")+
geom_text(data = metric_medians,
aes(group = research_category, x = question,
y = max*0.8, label = paste("med=", med)),
position=position_dodge(width=1), size = 5)+
scale_y_continuous(expand = c(0,0))+
labs(x = "", y = "Response value per applicant")+
my_theme_horiz+
theme(axis.text.x = element_blank(),
axis.ticks.x = element_blank(),
strip.background = element_rect(linetype = blank))
metric_data %>%
mutate(question = case_when(
question == "first_author" ~ "First-author papers",
question == "peer-reviewed_papers" ~ "Peer-reviewed papers",
question == "scholar_citations_all" ~ "Google Scholar citations",
question == "scholar_hindex" ~ "Google Scholar H index"
)) %>%
group_by(question, research_category) %>%
ggplot(aes(x = question, y = as.numeric(response),
fill = research_category))+
#geom_dotplot()+
geom_boxplot(position = "dodge")+
scale_fill_manual(breaks = research_breaks, values = cbPalette)+
facet_wrap(~question, scales = "free")+
geom_text(data = metric_medians,
aes(group = research_category, x = question,
y = max*0.8, label = paste("med=", med)),
position=position_dodge(width=1), size = 5)+
scale_y_continuous(expand = c(0,0))+
labs(x = "", y = "Response value per applicant")+
my_theme_horiz+
theme(axis.text.x = element_blank(),
axis.ticks.x = element_blank(),
strip.background = element_rect(linetype = "blank"))
source("~/Desktop/Job_Market_Survey_19-20/code/get_plot_options.R")
metric_data %>%
mutate(question = case_when(
question == "first_author" ~ "First-author papers",
question == "peer-reviewed_papers" ~ "Peer-reviewed papers",
question == "scholar_citations_all" ~ "Google Scholar citations",
question == "scholar_hindex" ~ "Google Scholar H index"
)) %>%
group_by(question, research_category) %>%
ggplot(aes(x = question, y = as.numeric(response),
fill = research_category))+
#geom_dotplot()+
geom_boxplot(position = "dodge")+
scale_fill_manual(breaks = research_breaks, values = cbPalette)+
facet_wrap(~question, scales = "free")+
geom_text(data = metric_medians,
aes(group = research_category, x = question,
y = max*0.8, label = paste("med=", med)),
position=position_dodge(width=1), size = 5)+
scale_y_continuous(expand = c(0,0))+
labs(x = "", y = "Response value per applicant")+
my_theme_horiz+
theme(axis.text.x = element_blank(),
axis.ticks.x = element_blank(),
strip.background = element_rect(linetype = "blank"))
#colorblind palettes----
cbPalette <- c("#000000", #black
"#E69F00", #goldenrod
"#56B4E9", #light blue
"#009E73", #dark green
"#F0E442", #gold
"#0072B2", #blue
"#D55E00", #orange rust
"#CC79A7", #dusty pink
"#999999") #grey
metric_data %>%
mutate(question = case_when(
question == "first_author" ~ "First-author papers",
question == "peer-reviewed_papers" ~ "Peer-reviewed papers",
question == "scholar_citations_all" ~ "Google Scholar citations",
question == "scholar_hindex" ~ "Google Scholar H index"
)) %>%
group_by(question, research_category) %>%
ggplot(aes(x = question, y = as.numeric(response),
fill = research_category))+
#geom_dotplot()+
geom_boxplot(position = "dodge")+
scale_fill_manual(breaks = research_breaks, values = cbPalette)+
facet_wrap(~question, scales = "free")+
geom_text(data = metric_medians,
aes(group = research_category, x = question,
y = max*0.8, label = paste("med=", med)),
position=position_dodge(width=1), size = 5)+
scale_y_continuous(expand = c(0,0))+
labs(x = "", y = "Response value per applicant")+
my_theme_horiz+
theme(axis.text.x = element_blank(),
axis.ticks.x = element_blank(),
strip.background = element_rect(linetype = "blank"))
source("~/Desktop/Job_Market_Survey_19-20/code/get_plot_options.R")
teaching_data %>%
count(research_category, question, response) %>%
left_join(., fig1d_group_count,
by = "research_category") %>%
mutate(percent = get_percent(n, total),
question = if_else(question == "teaching_status",
"Teaching experience (n=151)",
"Types of teaching experience")) %>%
ggplot(aes(x = response, y = percent,
fill = research_category))+
geom_col(position = "dodge")+
scale_fill_manual(breaks = research_breaks, values = cbPalette)+
facet_wrap(~question, scale = "free_y", ncol = 1)+
coord_flip()+
scale_y_continuous(expand = c(0,0))+
labs(x = "",
y = "Percent Respondents\n(by research field)")+
my_theme_horiz+
theme(strip.background = element_rect(linetype = "blank"))
source("~/Desktop/Job_Market_Survey_19-20/mollet_socialsci/code/figure_1.R")
#Fig 1C Target institution type (by gender)
fig1_inst_data %>%
ggplot(aes(x=factor(response, bin_levels_small),
fill = simple_gender))+
geom_bar(position = "dodge")+
scale_fill_manual(values = cbPalette)+
coord_flip()+
facet_wrap(~question)+
scale_y_continuous(expand = c(0,0))+
labs(y="Number of responses", x="Number of applications submitted",
fill = "Gender", caption = "GNC=gender non-conforming")+
my_theme_leg_horiz+
theme(strip.background = element_rect(linetype = "blank"))
#Fig 1C Target institution type (by gender)
fig1_inst_data %>%
ggplot(aes(x=factor(response, bin_levels_small),
fill = simple_gender))+
geom_bar(position = "dodge")+
scale_fill_manual(values = cbPalette)+
coord_flip()+
facet_wrap(~question)+
scale_y_continuous(expand = c(0,0))+
labs(y="Number of responses", x="Number of applications submitted",
fill = "Gender", caption = "GNC=gender non-conforming")+
base_theme+
theme(strip.background = element_rect(linetype = "blank"))
#Fig 1C Target institution type (by gender)
fig1_inst_data %>%
ggplot(aes(x=factor(response, bin_levels_small),
fill = simple_gender))+
geom_bar(position = "dodge")+
scale_fill_manual(breaks = gender_breaks, values = gender_color)+
coord_flip()+
facet_wrap(~question)+
scale_y_continuous(expand = c(0,0))+
labs(y="Number of responses", x="Number of applications submitted",
fill = "Gender", caption = "GNC=gender non-conforming")+
base_theme+
theme(strip.background = element_rect(linetype = "blank"))
fig1_inst_data %>%
ggplot(aes(x=factor(response, bin_levels_small),
fill = simple_gender))+
geom_bar(position = "dodge")
#Fig 1C Target institution type (by gender)
fig1_inst_data %>%
ggplot(aes(x=factor(response, bin_levels_small),
fill = simple_gender))+
geom_bar(position = "dodge")+
scale_fill_manual(breaks = gender_simple_breaks, values = gender_color)+
coord_flip()+
facet_wrap(~question)+
scale_y_continuous(expand = c(0,0))+
labs(y="Number of responses", x="Number of applications submitted",
fill = "Gender", caption = "GNC=gender non-conforming")+
base_theme+
theme(strip.background = element_rect(linetype = "blank"))
#simple_gender
gender_simple_breaks <- c("Man", "Woman/Trans/GNC")
#Fig 1C Target institution type (by gender)
fig1_inst_data %>%
ggplot(aes(x=factor(response, bin_levels_small),
fill = simple_gender))+
geom_bar(position = "dodge")+
scale_fill_manual(breaks = gender_simple_breaks, values = gender_color)+
coord_flip()+
facet_wrap(~question)+
scale_y_continuous(expand = c(0,0))+
labs(y="Number of responses", x="Number of applications submitted",
fill = "Gender", caption = "GNC=gender non-conforming")+
base_theme+
theme(strip.background = element_rect(linetype = "blank"))
#Fig 1C Target institution type (by gender)
fig1_inst_data %>%
filter(!is.na(simple_gender)) %>%
ggplot(aes(x=factor(response, bin_levels_small),
fill = simple_gender))+
geom_bar(position = "dodge")+
scale_fill_manual(breaks = gender_simple_breaks, values = gender_color)+
coord_flip()+
facet_wrap(~question)+
scale_y_continuous(expand = c(0,0))+
labs(y="Number of responses", x="Number of applications submitted",
fill = "Gender", caption = "GNC=gender non-conforming")+
base_theme+
theme(strip.background = element_rect(linetype = "blank"))
source("~/Desktop/Job_Market_Survey_19-20/code/get_plot_options.R")
#Fig 1C Target institution type (by gender)
fig1_inst_data %>%
filter(!is.na(simple_gender)) %>%
ggplot(aes(x=factor(response, bin_levels_small),
fill = simple_gender))+
geom_bar(position = "dodge")+
scale_fill_manual(breaks = gender_simple_breaks, values = gender_color)+
coord_flip()+
facet_wrap(~question)+
scale_y_continuous(expand = c(0,0))+
labs(y="Number of responses", x="Number of applications submitted",
fill = "Gender", caption = "GNC=gender non-conforming")+
base_theme+
theme(strip.background = element_rect(linetype = "blank"))
ggsave(filename = paste0("mollet_socialsci/figures/fig3_", Sys.Date(),".jpeg"))
source("~/Desktop/Job_Market_Survey_19-20/mollet_socialsci/code/figure_3.R")
source("~/Desktop/Job_Market_Survey_19-20/code/get_plot_options.R")
#Fig 3 Target institution type (by gender)
fig1_inst_data %>%
ggplot(aes(x=factor(response, bin_levels_small),
fill = simple_gender))+
geom_bar(position = "dodge")+
scale_fill_manual(breaks = gender_simple_breaks, values = gender_color)+
coord_flip()+
facet_wrap(~question)+
scale_y_continuous(expand = c(0,0))+
labs(y="Number of responses", x="Number of applications submitted",
fill = "Gender*", caption = "*GNC=gender non-conforming")+
base_theme+
theme(strip.background = element_rect(linetype = "blank"))
#Fig 3 Target institution type (by gender)
fig1_inst_data %>%
ggplot(aes(x=factor(response, bin_levels_small),
fill = simple_gender))+
geom_bar(position = "dodge")+
scale_fill_manual(breaks = gender_simple_breaks, values = gender_color)+
coord_flip()+
facet_wrap(~question,
labeller = labeller(
question = c("To RI institutions", "To PU institutions")))+
scale_y_continuous(expand = c(0,0))+
labs(y="Number of responses", x="Number of applications submitted",
fill = "Gender*", caption = "*GNC=gender non-conforming")+
base_theme+
theme(strip.background = element_rect(linetype = "blank"))
View(fig1_inst_data)
#Fig 3 Target institution type (by gender)
fig1_inst_data %>%
mutate(question = if_else(question == "RI__apps_submitted_binned",
"To RI institutions", "To PU institutions")) %>%
ggplot(aes(x=factor(response, bin_levels_small),
fill = simple_gender))+
geom_bar(position = "dodge")+
scale_fill_manual(breaks = gender_simple_breaks, values = gender_color)+
coord_flip()+
facet_wrap(~question)+
scale_y_continuous(expand = c(0,0))+
labs(y="Number of responses", x="Number of applications submitted",
fill = "Gender*", caption = "*GNC=gender non-conforming")+
base_theme+
theme(strip.background = element_rect(linetype = "blank"))
#Fig 3 Target institution type (by gender)
fig1_inst_data %>%
mutate(question = if_else(question == "RI_apps_submitted_binned",
"To RI institutions", "To PU institutions")) %>%
ggplot(aes(x=factor(response, bin_levels_small),
fill = simple_gender))+
geom_bar(position = "dodge")+
scale_fill_manual(breaks = gender_simple_breaks, values = gender_color)+
coord_flip()+
facet_wrap(~question)+
scale_y_continuous(expand = c(0,0))+
labs(y="Number of responses", x="Number of applications submitted",
fill = "Gender*", caption = "*GNC=gender non-conforming")+
base_theme+
theme(strip.background = element_rect(linetype = "blank"))
#Fig 3 Target institution type (by gender)
fig1_inst_data %>%
mutate(question = if_else(question == "RI_apps_submitted_binned",
"To RI institutions", "To PU institutions")) %>% View()
#Fig 3 Target institution type (by gender)
fig1_inst_data %>%
mutate(question = if_else(question == "R1_apps_submitted_binned",
"To RI institutions", "To PU institutions")) %>% View()
#Fig 3 Target institution type (by gender)
fig1_inst_data %>%
mutate(question = if_else(question == "R1_apps_submitted_binned",
"To RI institutions", "To PU institutions")) %>%
ggplot(aes(x=factor(response, bin_levels_small),
fill = simple_gender))+
geom_bar(position = "dodge")+
scale_fill_manual(breaks = gender_simple_breaks, values = gender_color)+
coord_flip()+
facet_wrap(~question)+
scale_y_continuous(expand = c(0,0))+
labs(y="Number of responses", x="Number of applications submitted",
fill = "Gender*", caption = "*GNC=gender non-conforming")+
base_theme+
theme(strip.background = element_rect(linetype = "blank"))
#Fig 3 Target institution type (by gender)
fig1_inst_data %>%
get_plot_summary(., "question", "simple_gender") %>% View()
#Fig 3 Target institution type (by gender)
fig1_inst_data %>%
get_plot_summary(., "question", "simple_gender", binary = FALSE) %>% View()
#Fig 3 Target institution type (by gender)
fig1_inst_data %>%
get_plot_summary(., "question", "simple_gender", binary = FALSE) %>%
left_join(fig1_inst_data, . by = c("question", "simple_gender")) %>% View()
#Fig 3 Target institution type (by gender)
fig1_inst_data %>%
get_plot_summary(., "question", "simple_gender", binary = FALSE) %>%
left_join(fig1_inst_data, ., by = c("question", "simple_gender")) %>% View()
fig1_inst_data %>%
get_plot_summary(., "question", "simple_gender", binary = FALSE)
