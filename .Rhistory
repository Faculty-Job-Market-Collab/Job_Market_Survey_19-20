source("~/Desktop/Job_Market_Survey_19-22/code/clean_merged_data.R")
source("~/Desktop/Job_Market_Survey_19-22/code/clean_merged_data.R")
colnames(clean_data_repaired)
?fct_collapse
merged_cleaned_data %>% count(adjusted_gender)
merged_cleaned_data %>% count(primary_caregiver)
?factor
merged_cleaned_data %>% count(financial_support)
ffi_data <- merged_cleaned_data %>%
select(id, income, student_loan, financial_support, dependents,
primary_caregiver, adjusted_gender,
extra_income, partner_occupation) %>%
mutate(income_ffi = fct_collapse(income,
"3" = c("More than $150,000", "$120,001 - 150,000"),
"2" = c("$90,001 - 120,000", "$70,001 - 90,000"),
"1" = c("$50,001 - 70,000", "$30,001 - 50,000",
"$25,000 - 30,000")),
loan_ffi = fct_collapse(student_loan,
"3" = "No, I did not use financial aid",
"2" = c("No, I have already paid them or received loan forgiveness",
"No, I used non-loan financial aid (e.g., grants, scholarships)",
"No, they are in deferment"),
"1" = "Yes"),
support_ffi = case_when(
financial_support == "No" & income_ffi == "3" ~ "3",
financial_support == "No" & income_ffi == "1" ~ "1",
financial_support == "Yes, but rarely" & income_ffi == "2" ~ "2",
str_detect(financial_support, "Yes, frequently") & income_ffi == "1" ~ "2"
),
extra_ffi = if_else(extra_income == "Yes", "3", "1"),
dependent_ffi = fct_collapse(dependents,
"3" = "No dependents",
"2" = "Yes, one child",
"1" = c("Yes, adult(s) I/we take care of",
"Yes, multiple children",
"Yes, adult(s) and child(ren) I/we take care of")),
gender_ffi = fct_collapse(adjusted_gender,
"2" = "Man",
"1" = c("Woman", "LGB+/GNC")),
childcare_ffi = case_when(
primary_caregiver == "No dependents" ~ "3",
primary_caregiver == "Myself, Single" ~ "1",
primary_caregiver == "My partner" & partner_occupation == "Primary caregiver (stay at home parent)" ~ "1",
primary_caregiver %in% c("A live-in relative", "Co-parents",
"Myself, Partnered") ~ "2"
)) %>%
mutate(across(contains("_ffi"), as.numeric)) %>%
mutate(across(contains("_ffi"),
function(x){replace_na(x, replace = 0)})) %>%
rowwise()
ffi_data <- merged_cleaned_data %>%
select(id, income, student_loan, financial_support, dependents,
primary_caregiver, adjusted_gender,
extra_income, partner_occupation) %>%
distinct()
View(ffi_data)
ffi_data %>% count(student_loan)
ffi_data <- merged_cleaned_data %>%
select(id, income, student_loan, financial_support, dependents,
primary_caregiver, adjusted_gender,
extra_income, partner_occupation, position) %>%
distinct()
ffi_data %>% count(position)
ffi_data <- merged_cleaned_data %>%
select(id, income, student_loan, financial_support, dependents,
primary_caregiver, adjusted_gender,
extra_income, partner_occupation, position) %>%
distinct() %>%
mutate(income_ffi = fct_collapse(income,
"3" = c("More than $150,000", "$120,001 - 150,000"),
"2" = c("$90,001 - 120,000", "$70,001 - 90,000"),
"1" = c("$50,001 - 70,000", "$30,001 - 50,000",
"$25,000 - 30,000")),
loan_ffi = case_when(
student_loan == "No financial aid" ~ "3",
student_loan == "Yes" ~ "1",
str_detect(student_loan, "No, Paid|Grants & scholarships") ~ "2",
student_loan == "No, Deferred" & position == "PhD Candidate (ABD)" ~ "2",
student_loan == "No, Deferred" & position != "PhD Candidate (ABD)" ~ "1",
),
support_ffi = case_when(
financial_support == "No" & income_ffi == "3" ~ "3",
financial_support == "No" & income_ffi == "1" ~ "1",
financial_support == "Yes, but rarely" & income_ffi == "2" ~ "2",
str_detect(financial_support, "Yes, frequently") & income_ffi == "1" ~ "2"
),
extra_ffi = if_else(extra_income == "Yes", "3", "1"),
dependent_ffi = fct_collapse(dependents,
"3" = "No dependents",
"2" = "Yes, one child",
"1" = c("Yes, adult(s) I/we take care of",
"Yes, multiple children",
"Yes, adult(s) and child(ren) I/we take care of")),
gender_ffi = fct_collapse(adjusted_gender,
"2" = "Man",
"1" = c("Woman", "LGB+/GNC")),
childcare_ffi = case_when(
primary_caregiver == "No dependents" ~ "3",
primary_caregiver == "Myself, Single" ~ "1",
primary_caregiver == "My partner" & partner_occupation == "Primary caregiver (stay at home parent)" ~ "1",
primary_caregiver %in% c("A live-in relative", "Co-parents",
"Myself, Partnered") ~ "2"
))
ffi_data %>% count(dependents)
#ESI data ---- in progress 12/5/2022
ffi_data <- merged_cleaned_data %>%
select(id, income, student_loan, financial_support, dependents,
primary_caregiver, adjusted_gender,
extra_income, partner_occupation, position) %>%
distinct() %>%
mutate(income_ffi = fct_collapse(income,
"3" = c("More than $150,000", "$120,001 - 150,000"),
"2" = c("$90,001 - 120,000", "$70,001 - 90,000"),
"1" = c("$50,001 - 70,000", "$30,001 - 50,000",
"$25,000 - 30,000")),
loan_ffi = case_when(
student_loan == "No financial aid" ~ "3",
student_loan == "Yes" ~ "1",
str_detect(student_loan, "No, Paid|Grants & scholarships") ~ "2",
student_loan == "No, Deferred" & position == "PhD Candidate (ABD)" ~ "2",
student_loan == "No, Deferred" & position != "PhD Candidate (ABD)" ~ "1",
),
support_ffi = case_when(
financial_support == "No" & income_ffi == "3" ~ "3",
financial_support == "No" & income_ffi == "1" ~ "1",
financial_support == "Yes, but rarely" & income_ffi == "2" ~ "2",
str_detect(financial_support, "Yes, frequently") & income_ffi == "1" ~ "2"
),
extra_ffi = if_else(extra_income == "Yes", "3", "1"),
dependent_ffi = fct_collapse(dependents,
"3" = "No dependents",
"2" = "Yes, one child",
"1" = c("Yes, adult(s)", "Yes, multiple children",
"Yes, adult(s) and child(ren)")),
gender_ffi = fct_collapse(adjusted_gender,
"2" = "Man",
"1" = c("Woman", "LGB+/GNC")),
childcare_ffi = case_when(
primary_caregiver == "No dependents" ~ "3",
primary_caregiver == "Myself, Single" ~ "1",
primary_caregiver == "My partner" & partner_occupation == "Primary caregiver (stay at home parent)" ~ "1",
primary_caregiver %in% c("A live-in relative", "Co-parents",
"Myself, Partnered") ~ "2"
))
View(ffi_data)
#ESI data ---- in progress 12/5/2022
ffi_data <- merged_cleaned_data %>%
select(id, income, student_loan, financial_support, dependents,
primary_caregiver, adjusted_gender,
extra_income, partner_occupation, position) %>%
distinct() %>%
mutate(income_ffi = fct_collapse(income,
"3" = c("More than $150,000", "$120,001 - 150,000"),
"2" = c("$90,001 - 120,000", "$70,001 - 90,000"),
"1" = c("$50,001 - 70,000", "$30,001 - 50,000",
"$25,000 - 30,000")),
loan_ffi = case_when(
student_loan == "No financial aid" ~ "3",
student_loan == "Yes" ~ "1",
str_detect(student_loan, "No, Paid|Grants & scholarships") ~ "2",
student_loan == "No, Deferred" & position == "PhD Candidate (ABD)" ~ "2",
student_loan == "No, Deferred" & position != "PhD Candidate (ABD)" ~ "1",
),
support_ffi = case_when(
financial_support == "No" & income_ffi == "3" ~ "3",
financial_support == "No" & income_ffi == "1" ~ "1",
financial_support == "Yes, but rarely" & income_ffi == "2" ~ "2",
str_detect(financial_support, "Yes, frequently") & income_ffi == "1" ~ "2"
),
extra_ffi = if_else(extra_income == "Yes", "3", "1"),
dependent_ffi = fct_collapse(dependents,
"3" = "No dependents",
"2" = "Yes, one child",
"1" = c("Yes, adult(s)", "Yes, multiple children",
"Yes, adult(s) and child(ren)")),
gender_ffi = fct_collapse(adjusted_gender,
"2" = "Man",
"1" = c("Woman", "LGB+/GNC")),
childcare_ffi = case_when(
primary_caregiver == "No dependents" ~ "3",
primary_caregiver == "Myself, Single" ~ "1",
primary_caregiver == "My partner" & partner_occupation == "Primary caregiver (stay at home parent)" ~ "1",
primary_caregiver %in% c("A live-in relative", "Co-parents",
"Myself, Partnered", "My partner") ~ "2"
))
#ESI data ---- in progress 12/5/2022
ffi_data <- merged_cleaned_data %>%
select(id, income, student_loan, financial_support, dependents,
primary_caregiver, adjusted_gender,
extra_income, partner_occupation, position) %>%
distinct() %>%
mutate(income_ffi = fct_collapse(income,
"3" = c("More than $150,000", "$120,001 - 150,000"),
"2" = c("$90,001 - 120,000", "$70,001 - 90,000"),
"1" = c("$50,001 - 70,000", "$30,001 - 50,000",
"$25,000 - 30,000")),
loan_ffi = case_when(
student_loan == "No financial aid" ~ "3",
student_loan == "Yes" ~ "1",
str_detect(student_loan, "No, Paid|Grants & scholarships") ~ "2",
student_loan == "No, Deferred" & position == "PhD Candidate (ABD)" ~ "2",
student_loan == "No, Deferred" & position != "PhD Candidate (ABD)" ~ "1",
),
support_ffi = case_when(
financial_support == "No" & income_ffi == "3" ~ "3",
financial_support == "No" & income_ffi == "2" ~ "2",
financial_support == "No" & income_ffi == "1" ~ "1",
financial_support == "Yes, but rarely" & income_ffi == "2" ~ "2",
str_detect(financial_support, "Yes, frequently") & income_ffi == "1" ~ "2"
str_detect(financial_support, "Yes") & income_ffi == "2" ~ "2",
#ESI data ---- in progress 12/5/2022
ffi_data <- merged_cleaned_data %>%
select(id, income, student_loan, financial_support, dependents,
primary_caregiver, adjusted_gender,
extra_income, partner_occupation, position) %>%
distinct() %>%
mutate(income_ffi = fct_collapse(income,
"3" = c("More than $150,000", "$120,001 - 150,000"),
"2" = c("$90,001 - 120,000", "$70,001 - 90,000"),
"1" = c("$50,001 - 70,000", "$30,001 - 50,000",
"$25,000 - 30,000")),
loan_ffi = case_when(
student_loan == "No financial aid" ~ "3",
student_loan == "Yes" ~ "1",
str_detect(student_loan, "No, Paid|Grants & scholarships") ~ "2",
student_loan == "No, Deferred" & position == "PhD Candidate (ABD)" ~ "2",
student_loan == "No, Deferred" & position != "PhD Candidate (ABD)" ~ "1",
),
support_ffi = case_when(
financial_support == "No" & income_ffi == "3" ~ "3",
financial_support == "No" & income_ffi == "2" ~ "2",
financial_support == "No" & income_ffi == "1" ~ "1",
financial_support == "Yes, but rarely" & income_ffi == "2" ~ "2",
str_detect(financial_support, "Yes, frequently") & income_ffi == "1" ~ "2",
str_detect(financial_support, "Yes") & income_ffi == "2" ~ "2",
str_detect(financial_support, "Yes") & income_ffi == "3" ~ "3",
str_detect(financial_support, "Yes") & income_ffi == "1" ~ "1"
),
extra_ffi = if_else(extra_income == "Yes", "2", "1"),
dependent_ffi = fct_collapse(dependents,
"3" = "No dependents",
"2" = "Yes, one child",
"1" = c("Yes, adult(s)", "Yes, multiple children",
"Yes, adult(s) and child(ren)")),
gender_ffi = fct_collapse(adjusted_gender,
"2" = "Man",
"1" = c("Woman", "LGB+/GNC")),
childcare_ffi = case_when(
primary_caregiver == "No dependents" ~ "3",
primary_caregiver == "Myself, Single" ~ "1",
primary_caregiver == "My partner" & partner_occupation == "Primary caregiver (stay at home parent)" ~ "1",
primary_caregiver %in% c("A live-in relative", "Co-parents",
"Myself, Partnered", "My partner") ~ "2"
))
#FFI data ---- in progress 12/5/2022
ffi_data <- merged_cleaned_data %>%
select(id, income, student_loan, financial_support, dependents,
primary_caregiver, adjusted_gender,
extra_income, partner_occupation, position) %>%
distinct() %>%
mutate(income_ffi = fct_collapse(income,
"3" = c("More than $150,000", "$120,001 - 150,000"),
"2" = c("$90,001 - 120,000", "$70,001 - 90,000"),
"1" = c("$50,001 - 70,000", "$30,001 - 50,000",
"$25,000 - 30,000")),
loan_ffi = case_when(
student_loan == "No financial aid" ~ "3",
student_loan == "Yes" ~ "1",
str_detect(student_loan, "No, Paid|Grants & scholarships") ~ "2",
student_loan == "No, Deferred" & position == "PhD Candidate (ABD)" ~ "2",
student_loan == "No, Deferred" & position != "PhD Candidate (ABD)" ~ "1",
),
support_ffi = case_when(
financial_support == "No" & income_ffi == "3" ~ "3",
financial_support == "No" & income_ffi == "2" ~ "2",
financial_support == "No" & income_ffi == "1" ~ "1",
financial_support == "Yes, but rarely" & income_ffi == "2" ~ "2",
str_detect(financial_support, "Yes, frequently") & income_ffi == "1" ~ "2",
str_detect(financial_support, "Yes") & income_ffi == "2" ~ "2",
str_detect(financial_support, "Yes") & income_ffi == "3" ~ "3",
str_detect(financial_support, "Yes") & income_ffi == "1" ~ "1"
),
extra_ffi = if_else(extra_income == "Yes", "2", "1"),
dependent_ffi = fct_collapse(dependents,
"3" = "No dependents",
"2" = "Yes, one child",
"1" = c("Yes, adult(s)", "Yes, multiple children",
"Yes, adult(s) and child(ren)")),
gender_ffi = fct_collapse(adjusted_gender,
"2" = "Man",
"1" = c("Woman", "LGB+/GNC")),
childcare_ffi = case_when(
primary_caregiver == "No dependents" ~ "3",
primary_caregiver == "Myself, Single" ~ "1",
primary_caregiver == "My partner" & partner_occupation == "Primary caregiver (stay at home parent)" ~ "1",
primary_caregiver %in% c("A live-in relative", "Co-parents",
"Myself, Partnered", "My partner") ~ "2"
)) %>%
mutate(across(contains("_ffi"), as.numeric)) %>%
mutate(across(contains("_ffi"),
function(x){replace_na(x, replace = 0)})) %>%
rowwise() %>%
mutate(ffi = sum(c_across(9:15)))
#FFI data ---- in progress 12/5/2022
ffi_data <- merged_cleaned_data %>%
select(id, income, student_loan, financial_support, dependents,
primary_caregiver, adjusted_gender,
extra_income, partner_occupation, position) %>%
distinct() %>%
mutate(income_ffi = fct_collapse(income,
"3" = c("More than $150,000", "$120,001 - 150,000"),
"2" = c("$90,001 - 120,000", "$70,001 - 90,000"),
"1" = c("$50,001 - 70,000", "$30,001 - 50,000",
"$25,000 - 30,000")),
loan_ffi = case_when(
student_loan == "No financial aid" ~ "3",
student_loan == "Yes" ~ "1",
str_detect(student_loan, "No, Paid|Grants & scholarships") ~ "2",
student_loan == "No, Deferred" & position == "PhD Candidate (ABD)" ~ "2",
student_loan == "No, Deferred" & position != "PhD Candidate (ABD)" ~ "1",
),
support_ffi = case_when(
financial_support == "No" & income_ffi == "3" ~ "3",
financial_support == "No" & income_ffi == "2" ~ "2",
financial_support == "No" & income_ffi == "1" ~ "1",
financial_support == "Yes, but rarely" & income_ffi == "2" ~ "2",
str_detect(financial_support, "Yes, frequently") & income_ffi == "1" ~ "2",
str_detect(financial_support, "Yes") & income_ffi == "2" ~ "2",
str_detect(financial_support, "Yes") & income_ffi == "3" ~ "3",
str_detect(financial_support, "Yes") & income_ffi == "1" ~ "1"
),
extra_ffi = if_else(extra_income == "Yes", "2", "1"),
dependent_ffi = fct_collapse(dependents,
"3" = "No dependents",
"2" = "Yes, one child",
"1" = c("Yes, adult(s)", "Yes, multiple children",
"Yes, adult(s) and child(ren)")),
gender_ffi = fct_collapse(adjusted_gender,
"2" = "Man",
"1" = c("Woman", "LGB+/GNC")),
childcare_ffi = case_when(
primary_caregiver == "No dependents" ~ "3",
primary_caregiver == "Myself, Single" ~ "1",
primary_caregiver == "My partner" & partner_occupation == "Primary caregiver (stay at home parent)" ~ "1",
primary_caregiver %in% c("A live-in relative", "Co-parents",
"Myself, Partnered", "My partner") ~ "2"
)) %>%
mutate(across(contains("_ffi"), as.numeric)) %>%
mutate(across(contains("_ffi"),
function(x){replace_na(x, replace = 0)})) %>%
rowwise() %>%
mutate(ffi = sum(c_across(11:17)))
#FFI data ---- in progress 12/5/2022
ffi_data <- merged_cleaned_data %>%
select(id, income, student_loan, financial_support, dependents,
primary_caregiver, adjusted_gender,
extra_income, partner_occupation, position) %>%
distinct() %>%
mutate(income_ffi = fct_collapse(income,
"3" = c("More than $150,000", "$120,001 - 150,000"),
"2" = c("$90,001 - 120,000", "$70,001 - 90,000"),
"1" = c("$50,001 - 70,000", "$30,001 - 50,000",
"$25,000 - 30,000")),
loan_ffi = case_when(
student_loan == "No financial aid" ~ "3",
student_loan == "Yes" ~ "1",
str_detect(student_loan, "No, Paid|Grants & scholarships") ~ "2",
student_loan == "No, Deferred" & position == "PhD Candidate (ABD)" ~ "2",
student_loan == "No, Deferred" & position != "PhD Candidate (ABD)" ~ "1",
),
support_ffi = case_when(
financial_support == "No" & income_ffi == "3" ~ "3",
financial_support == "No" & income_ffi == "2" ~ "2",
financial_support == "No" & income_ffi == "1" ~ "1",
financial_support == "Yes, but rarely" & income_ffi == "2" ~ "2",
str_detect(financial_support, "Yes, frequently") & income_ffi == "1" ~ "2",
str_detect(financial_support, "Yes") & income_ffi == "2" ~ "2",
str_detect(financial_support, "Yes") & income_ffi == "3" ~ "3",
str_detect(financial_support, "Yes") & income_ffi == "1" ~ "1"
),
extra_ffi = if_else(extra_income == "Yes", "2", "1"),
dependent_ffi = fct_collapse(dependents,
"3" = "No dependents",
"2" = "Yes, one child",
"1" = c("Yes, adult(s)", "Yes, multiple children",
"Yes, adult(s) and child(ren)")),
gender_ffi = fct_collapse(adjusted_gender,
"2" = "Man",
"1" = c("Woman", "LGB+/GNC")),
childcare_ffi = case_when(
primary_caregiver == "No dependents" ~ "3",
primary_caregiver == "Myself, Single" ~ "1",
primary_caregiver == "My partner" & partner_occupation == "Primary caregiver (stay at home parent)" ~ "1",
primary_caregiver %in% c("A live-in relative", "Co-parents",
"Myself, Partnered", "My partner") ~ "2"
)) %>%
mutate(across(contains("_ffi"), as.numeric)) %>%
mutate(across(contains("_ffi"),
function(x){replace_na(x, replace = 0)})) %>%
rowwise() %>%
mutate(ffi_num = sum(c_across(11:17))) %>%
filter(ffi_num >= 5) %>% #allows for two unanswered questions
select(id, ffi_num)
summary(ffi_data)
summary(ffi_data$ffi_num)
#FFI data ---- in progress 12/5/2022
ffi_data <- merged_cleaned_data %>%
select(id, income, student_loan, financial_support, dependents,
primary_caregiver, adjusted_gender,
extra_income, partner_occupation, position) %>%
distinct() %>%
mutate(income_ffi = fct_collapse(income,
"3" = c("More than $150,000", "$120,001 - 150,000"),
"2" = c("$90,001 - 120,000", "$70,001 - 90,000"),
"1" = c("$50,001 - 70,000", "$30,001 - 50,000",
"$25,000 - 30,000")),
loan_ffi = case_when(
student_loan == "No financial aid" ~ "3",
student_loan == "Yes" ~ "1",
str_detect(student_loan, "No, Paid|Grants & scholarships") ~ "2",
student_loan == "No, Deferred" & position == "PhD Candidate (ABD)" ~ "2",
student_loan == "No, Deferred" & position != "PhD Candidate (ABD)" ~ "1",
),
support_ffi = case_when(
financial_support == "No" & income_ffi == "3" ~ "3",
financial_support == "No" & income_ffi == "2" ~ "2",
financial_support == "No" & income_ffi == "1" ~ "1",
financial_support == "Yes, but rarely" & income_ffi == "2" ~ "2",
str_detect(financial_support, "Yes, frequently") & income_ffi == "1" ~ "2",
str_detect(financial_support, "Yes") & income_ffi == "2" ~ "2",
str_detect(financial_support, "Yes") & income_ffi == "3" ~ "3",
str_detect(financial_support, "Yes") & income_ffi == "1" ~ "1"
),
extra_ffi = if_else(extra_income == "Yes", "3", "2"),
dependent_ffi = fct_collapse(dependents,
"3" = "No dependents",
"2" = "Yes, one child",
"1" = c("Yes, adult(s)", "Yes, multiple children",
"Yes, adult(s) and child(ren)")),
gender_ffi = fct_collapse(adjusted_gender,
"2" = "Man",
"1" = c("Woman", "LGB+/GNC")),
childcare_ffi = case_when(
primary_caregiver == "No dependents" ~ "3",
primary_caregiver == "Myself, Single" ~ "1",
primary_caregiver == "My partner" & partner_occupation == "Primary caregiver (stay at home parent)" ~ "1",
primary_caregiver %in% c("A live-in relative", "Co-parents",
"Myself, Partnered", "My partner") ~ "2"
)) %>%
mutate(across(contains("_ffi"), as.numeric)) %>%
mutate(across(contains("_ffi"),
function(x){replace_na(x, replace = 0)})) %>%
rowwise() %>%
mutate(ffi_value = sum(c_across(11:17))) %>%
filter(ffi_value >= 5) %>% #allows for two unanswered questions
select(id, ffi_value)
ffi_summary <- summary(ffi_data$ffi_value) #identify ffi min, max, and IQR values to create categories
summary(ffi_data$ffi_value)
#FFI data ---- in progress 12/5/2022
ffi_data <- merged_cleaned_data %>%
select(id, income, student_loan, financial_support, dependents,
primary_caregiver, adjusted_gender,
extra_income, partner_occupation, position) %>%
distinct() %>%
mutate(income_ffi = fct_collapse(income,
"3" = c("More than $150,000", "$120,001 - 150,000"),
"2" = c("$90,001 - 120,000", "$70,001 - 90,000"),
"1" = c("$50,001 - 70,000", "$30,001 - 50,000",
"$25,000 - 30,000")),
loan_ffi = case_when(
student_loan == "No financial aid" ~ "3",
student_loan == "Yes" ~ "1",
str_detect(student_loan, "No, Paid|Grants & scholarships") ~ "2",
student_loan == "No, Deferred" & position == "PhD Candidate (ABD)" ~ "2",
student_loan == "No, Deferred" & position != "PhD Candidate (ABD)" ~ "1",
),
support_ffi = case_when(
financial_support == "No" & income_ffi == "3" ~ "3",
financial_support == "No" & income_ffi == "2" ~ "2",
financial_support == "No" & income_ffi == "1" ~ "1",
financial_support == "Yes, but rarely" & income_ffi == "2" ~ "2",
str_detect(financial_support, "Yes, frequently") & income_ffi == "1" ~ "2",
str_detect(financial_support, "Yes") & income_ffi == "2" ~ "2",
str_detect(financial_support, "Yes") & income_ffi == "3" ~ "3",
str_detect(financial_support, "Yes") & income_ffi == "1" ~ "1"
),
extra_ffi = if_else(extra_income == "Yes", "3", "2"),
dependent_ffi = fct_collapse(dependents,
"3" = "No dependents",
"2" = "Yes, one child",
"1" = c("Yes, adult(s)", "Yes, multiple children",
"Yes, adult(s) and child(ren)")),
gender_ffi = fct_collapse(adjusted_gender,
"2" = "Man",
"1" = c("Woman", "LGB+/GNC")),
childcare_ffi = case_when(
primary_caregiver == "No dependents" ~ "3",
primary_caregiver == "Myself, Single" ~ "1",
primary_caregiver == "My partner" & partner_occupation == "Primary caregiver (stay at home parent)" ~ "1",
primary_caregiver %in% c("A live-in relative", "Co-parents",
"Myself, Partnered", "My partner") ~ "2"
)) %>%
mutate(across(contains("_ffi"), as.numeric)) %>%
mutate(across(contains("_ffi"),
function(x){replace_na(x, replace = 0)})) %>%
rowwise() %>%
mutate(ffi_value = sum(c_across(11:17))) %>%
filter(ffi_value >= 6) %>% #allows for two unanswered questions
select(id, ffi_value)
summary(ffi_data$ffi_value)
source("~/Desktop/Job_Market_Survey_19-22/code/get_ffi_data.R")
source("~/Desktop/Job_Market_Survey_19-22/code/get_ffi_data.R")
